
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="author" content="colorlib.com">
        <link href="https://fonts.googleapis.com/css?family=Poppins" rel="stylesheet" />
        <style> 
            html{line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0;font-family:"Gill Sans",sans-serif}article,aside,footer,header,nav,section{display:block}h1{font-size:2em;margin:.67em 0;width:100%}figcaption,figure,main{display:block}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent;-webkit-text-decoration-skip:objects}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}dfn{font-style:italic}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}audio,video{display:inline-block}audio:not([controls]){display:none;height:0}img{border-style:none}svg:not(:root){overflow:hidden}button,input,optgroup,select,textarea{font-family:sans-serif;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{display:inline-block;vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details,menu{display:block}summary{display:list-item}canvas{display:inline-block}template{display:none}[hidden]{display:none}html{height:100%}fieldset{margin:0;padding:0;-webkit-margin-start:0;-webkit-margin-end:0;-webkit-padding-before:0;-webkit-padding-start:0;-webkit-padding-end:0;-webkit-padding-after:0;border:0}legend{margin:0;padding:0;display:block;-webkit-padding-start:0;-webkit-padding-end:0}.choices{position:relative;margin-bottom:24px;font-size:16px}.choices:focus{outline:0}.choices:last-child{margin-bottom:0}.choices.is-disabled .choices__inner,.choices.is-disabled .choices__input{background-color:#eaeaea;cursor:not-allowed;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.choices.is-disabled .choices__item{cursor:not-allowed}.choices[data-type*=select-one]{cursor:pointer}.choices[data-type*=select-one] .choices__inner{padding-bottom:7.5px}.choices[data-type*=select-one] .choices__input{display:block;width:100%;padding:10px;border-bottom:1px solid #ddd;background-color:#fff;margin:0}.choices[data-type*=select-one] .choices__button{background-image:url(../../icons/cross-inverse.svg);padding:0;background-size:8px;height:100%;position:absolute;top:50%;right:0;margin-top:-10px;margin-right:25px;height:20px;width:20px;border-radius:10em;opacity:.5}.choices[data-type*=select-one] .choices__button:focus,.choices[data-type*=select-one] .choices__button:hover{opacity:1}.choices[data-type*=select-one] .choices__button:focus{box-shadow:0 0 0 2px #00bcd4}.choices[data-type*=select-one]:after{content:"";height:0;width:0;border-style:solid;border-color:#333 transparent transparent transparent;border-width:5px;position:absolute;right:11.5px;top:50%;margin-top:-2.5px;pointer-events:none}.choices[data-type*=select-one].is-open:after{border-color:transparent transparent #333 transparent;margin-top:-7.5px}.choices[data-type*=select-one][dir=rtl]:after{left:11.5px;right:auto}.choices[data-type*=select-one][dir=rtl] .choices__button{right:auto;left:0;margin-left:25px;margin-right:0}.choices[data-type*=select-multiple] .choices__inner,.choices[data-type*=text] .choices__inner{cursor:text}.choices[data-type*=select-multiple] .choices__button,.choices[data-type*=text] .choices__button{position:relative;display:inline-block;margin-top:0;margin-right:-4px;margin-bottom:0;margin-left:8px;padding-left:16px;border-left:1px solid #008fa1;background-image:url(../../icons/cross.svg);background-size:8px;width:8px;line-height:1;opacity:.75}.choices[data-type*=select-multiple] .choices__button:focus,.choices[data-type*=select-multiple] .choices__button:hover,.choices[data-type*=text] .choices__button:focus,.choices[data-type*=text] .choices__button:hover{opacity:1}.choices__inner{display:inline-block;vertical-align:top;width:100%;background-color:#f9f9f9;padding:7.5px 7.5px 3.75px;border:1px solid #ddd;border-radius:2.5px;font-size:14px;min-height:44px;overflow:hidden}.is-focused .choices__inner,.is-open .choices__inner{border-color:#b7b7b7}.is-open .choices__inner{border-radius:2.5px 2.5px 0 0}.is-flipped.is-open .choices__inner{border-radius:0 0 2.5px 2.5px}.choices__list{margin:0;padding-left:0;list-style:none}.choices__list--single{display:inline-block;padding:4px 16px 4px 4px;width:100%}[dir=rtl] .choices__list--single{padding-right:4px;padding-left:16px}.choices__list--single .choices__item{width:100%}.choices__list--multiple{display:inline}.choices__list--multiple .choices__item{display:inline-block;vertical-align:middle;border-radius:20px;padding:4px 10px;font-size:12px;font-weight:500;margin-right:3.75px;margin-bottom:3.75px;background-color:#00bcd4;border:1px solid #00a5bb;color:#fff;word-break:break-all}.choices__list--multiple .choices__item[data-deletable]{padding-right:5px}[dir=rtl] .choices__list--multiple .choices__item{margin-right:0;margin-left:3.75px}.choices__list--multiple .choices__item.is-highlighted{background-color:#00a5bb;border:1px solid #008fa1}.is-disabled .choices__list--multiple .choices__item{background-color:#aaa;border:1px solid #919191}.choices__list--dropdown{display:none;z-index:1;position:absolute;width:100%;background-color:#fff;border:1px solid #ddd;top:100%;margin-top:-1px;border-bottom-left-radius:2.5px;border-bottom-right-radius:2.5px;overflow:hidden;word-break:break-all}.choices__list--dropdown.is-active{display:block}.is-open .choices__list--dropdown{border-color:#b7b7b7}.is-flipped .choices__list--dropdown{top:auto;bottom:100%;margin-top:0;margin-bottom:-1px;border-radius:.25rem .25rem 0 0}.choices__list--dropdown .choices__list{position:relative;max-height:300px;overflow:auto;-webkit-overflow-scrolling:touch;will-change:scroll-position}.choices__list--dropdown .choices__item{position:relative;padding:10px;font-size:14px}[dir=rtl] .choices__list--dropdown .choices__item{text-align:right}@media (min-width:640px){.choices__list--dropdown .choices__item--selectable{padding-right:100px}.choices__list--dropdown .choices__item--selectable:after{content:attr(data-select-text);font-size:12px;opacity:0;position:absolute;right:10px;top:50%;transform:translateY(-50%)}[dir=rtl] .choices__list--dropdown .choices__item--selectable{text-align:right;padding-left:100px;padding-right:10px}[dir=rtl] .choices__list--dropdown .choices__item--selectable:after{right:auto;left:10px}}.choices__list--dropdown .choices__item--selectable.is-highlighted{background-color:#f2f2f2}.choices__list--dropdown .choices__item--selectable.is-highlighted:after{opacity:.5}.choices__item{cursor:default}.choices__item--selectable{cursor:pointer}.choices__item--disabled{cursor:not-allowed;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;opacity:.5}.choices__heading{font-weight:600;font-size:12px;padding:10px;border-bottom:1px solid #f7f7f7;color:gray}.choices__button{text-indent:-9999px;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:0;background-color:transparent;background-repeat:no-repeat;background-position:center;cursor:pointer}.choices__button:focus{outline:0}.choices__input{display:inline-block;vertical-align:baseline;background-color:#f9f9f9;font-size:14px;margin-bottom:5px;border:0;border-radius:0;max-width:100%;padding:4px 0 4px 2px}.choices__input:focus{outline:0}[dir=rtl] .choices__input{padding-right:2px;padding-left:0}.choices__placeholder{opacity:.5}*{box-sizing:border-box}.s003{min-height:100vh;text-align:center;font-family:Poppins,sans-serif;background-color:#a598ee;background-size:cover;background-position:center center;padding:15px}.s003 form{width:50%;margin-bottom:0;display:inline-block}.s003 form .inner-form{background:#fff;display:-ms-flexbox;display:flex;width:100%;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center;box-shadow:0 8px 20px 0 rgba(0,0,0,.15);border-radius:3px}.s003 form .inner-form .input-field{height:68px}.s003 form .inner-form .input-field input{height:100%;background:0 0;border:0;display:block;width:100%;padding:10px 32px;font-size:16px;color:#555}.s003 form .inner-form .input-field input.placeholder{color:#888;font-size:16px}.s003 form .inner-form .input-field input:-moz-placeholder{color:#888;font-size:16px}.s003 form .inner-form .input-field input::-webkit-input-placeholder{color:#888;font-size:16px}.s003 form .inner-form .input-field input:focus,.s003 form .inner-form .input-field input:hover{box-shadow:none;outline:0;border-color:#fff}.s003 form .inner-form .input-field.first-wrap{width:200px;border-right:1px solid rgba(0,0,0,.1)}.s003 form .inner-form .input-field.first-wrap .choices__inner{background:0 0;border-radius:0;border:0;height:100%;color:#fff;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;padding:10px 30px}.s003 form .inner-form .input-field.first-wrap .choices__inner .choices__list.choices__list--single{display:-ms-flexbox;display:flex;padding:0;-ms-flex-align:center;align-items:center;height:100%}.s003 form .inner-form .input-field.first-wrap .choices__inner .choices__item.choices__item--selectable.choices__placeholder{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;height:100%;opacity:1;color:#888}.s003 form .inner-form .input-field.first-wrap .choices__inner .choices__list--single .choices__item{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;height:100%;color:#555}.s003 form .inner-form .input-field.first-wrap .choices[data-type*=select-one]:after{right:30px;border-color:#e5e5e5 transparent transparent transparent}.s003 form .inner-form .input-field.first-wrap .choices__list.choices__list--dropdown{border:0;background:#fff;padding:20px 30px;margin-top:2px;border-radius:4px;box-shadow:0 8px 20px 0 rgba(0,0,0,.15)}.s003 form .inner-form .input-field.first-wrap .choices__list.choices__list--dropdown .choices__item--selectable{padding-right:0}.s003 form .inner-form .input-field.first-wrap .choices__list--dropdown .choices__item--selectable.is-highlighted{background:#fff;color:#63c76a}.s003 form .inner-form .input-field.first-wrap .choices__list--dropdown .choices__item{color:#555;min-height:24px}.s003 form .inner-form .input-field.second-wrap{-ms-flex-positive:1;flex-grow:1}.s003 form .inner-form .input-field.third-wrap{width:74px}.s003 form .inner-form .input-field.third-wrap .btn-search{height:100%;width:100%;white-space:nowrap;color:#fff;border:0;cursor:pointer;background:#63c76a;transition:all .2s ease-out,color .2s ease-out}.s003 form .inner-form .input-field.third-wrap .btn-search svg{width:16px}.s003 form .inner-form .input-field.third-wrap .btn-search:hover{background:#50c058}.s003 form .inner-form .input-field.third-wrap .btn-search:focus{outline:0;box-shadow:none}@media screen and (max-width:992px){.s003 form .inner-form .input-field{height:50px}}@media screen and (max-width:767px){.s003 form .inner-form{-ms-flex-wrap:wrap;flex-wrap:wrap;padding:20px}.s003 form .inner-form .input-field{margin-bottom:20px;border-bottom:1px solid rgba(0,0,0,.1)}.s003 form .inner-form .input-field input{padding:10px 15px}.s003 form .inner-form .input-field.first-wrap{width:100%;border-right:0}.s003 form .inner-form .input-field.first-wrap .choices__inner{padding:10px 15px}.s003 form .inner-form .input-field.first-wrap .choices[data-type*=select-one]:after{right:11.5px;border-color:#e5e5e5 transparent transparent transparent}.s003 form .inner-form .input-field.second-wrap{width:100%;margin-bottom:30px}.s003 form .inner-form .input-field.second-wrap input{border:1px solid rgba(255,255,255,.3)}.s003 form .inner-form .input-field.third-wrap{margin-bottom:0;width:100%}}table{border-spacing:1;border-collapse:collapse;background:#fff;border-radius:10px;overflow:hidden;width:50%;margin:2em auto;position:relative;display:none;table-layout:fixed}tbody,thead{width:100%}table td,table th{padding-left:8px}table thead tr{height:60px;background:#36304a}table tbody tr{height:50px}table tbody tr:last-child{border:0}table td,table th{text-align:left}.table100-head th{font-family:sans-serif;font-size:18px;color:#fff;line-height:1.2;font-weight:unset}tbody tr:nth-child(even){background-color:#f5f5f5}tbody tr{font-family:sans-serif;font-size:15px;color:grey;line-height:1.2;font-weight:unset}tbody tr:hover{color:#555;background-color:#f5f5f5;cursor:pointer}.column1{width:450px}.column2,.column3,.column4{width:170px!important;min-width:20%!important}#loader{display:none}.loading{position:fixed;z-index:999;height:2em;width:2em;overflow:show;margin:auto;top:0;left:0;bottom:0;right:0}.loading:before{content:'';display:block;position:fixed;top:0;left:0;width:100%;height:100%;background:radial-gradient(rgba(20,20,20,.8),rgba(0,0,0,.8));background:-webkit-radial-gradient(rgba(20,20,20,.8),rgba(0,0,0,.8))}.loading:not(:required){font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0;display:block}.loading:not(:required):after{content:'';display:block;font-size:10px;width:1em;height:1em;margin-top:-.5em;-webkit-animation:spinner 1.5s infinite linear;-moz-animation:spinner 1.5s infinite linear;-ms-animation:spinner 1.5s infinite linear;-o-animation:spinner 1.5s infinite linear;animation:spinner 1.5s infinite linear;border-radius:.5em;-webkit-box-shadow:rgba(255,255,255,.75) 1.5em 0 0 0,rgba(255,255,255,.75) 1.1em 1.1em 0 0,rgba(255,255,255,.75) 0 1.5em 0 0,rgba(255,255,255,.75) -1.1em 1.1em 0 0,rgba(255,255,255,.75) -1.5em 0 0 0,rgba(255,255,255,.75) -1.1em -1.1em 0 0,rgba(255,255,255,.75) 0 -1.5em 0 0,rgba(255,255,255,.75) 1.1em -1.1em 0 0;box-shadow:rgba(255,255,255,.75) 1.5em 0 0 0,rgba(255,255,255,.75) 1.1em 1.1em 0 0,rgba(255,255,255,.75) 0 1.5em 0 0,rgba(255,255,255,.75) -1.1em 1.1em 0 0,rgba(255,255,255,.75) -1.5em 0 0 0,rgba(255,255,255,.75) -1.1em -1.1em 0 0,rgba(255,255,255,.75) 0 -1.5em 0 0,rgba(255,255,255,.75) 1.1em -1.1em 0 0}

        </style>            
    </head>
    <body>
        <div id="loader" class="loading">Loading&#8230;</div>
        <div class="s003">
            <h1>Simple Search Demo</h1>
            <form id="searchFrm">
                <div class="inner-form">
                    <div class="input-field second-wrap">
                        <input id="search" type="text" placeholder="Keywords" autocomplete="off"     />
                    </div>
                    <div class="input-field third-wrap">
                        <button class="btn-search" id="searchBtn" type="button">
                            <svg class="svg-inline--fa fa-search fa-w-16" aria-hidden="true" data-prefix="fas" data-icon="search" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                <path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path>
                            </svg>
                        </button>
                    </div>
                </div>
            </form>
            <table id="searchResults">
                <thead>
                    <tr class="table100-head">
                        <th class="column1">Títol</th>
                        <th class="column2">Autor</th>
                        <th class="column3">Gènere</th>
                        <th class="column4">Editorial</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>

        </div>
        
    </body>

    <script>

        const cloudfrontDNS = "xxxxxxxxxxx.cloudfront.net";

        function search(e){
            let search = searchTxt.value;
            if(!search || (e.keyCode && e.keyCode!==13)){
                return false;
            }

            loading.style.display = "block";
            search = search.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "");

            fetch(`https://${cloudfrontDNS}/search/fulltext/${search}`)
                .then(response => response.json())
                .then(data => draw(data));

            return false;
        }

        function clickSearch(params){
            loading.style.display = "block";
            fetch(`https://${cloudfrontDNS}/search/params/${params}`)
                .then(response => response.json())
                .then(data => draw(data));

            return false;
        }


        function draw(data){
            tableBody.innerHTML="";
            for(let i=0,z=data.length;i<z;i++){
                tableBody.insertAdjacentHTML("beforeend", `<tr><td class="column1">${data[i][0]}</td><td class="column2"><a class="query" href="#" data-params="author/${data[i][1]}">${data[i][1]}</a></td><td class="column3"><a class="query" href="#" data-params="genre/${data[i][2]}">${data[i][2]}</a></td><td class="column4"><a class="query" href="#" data-params="publisher/${data[i][3]}">${data[i][3]}</a></td></tr>`);
            }

            searchResults.style.display = "block";
            loading.style.display = "none";

            document.querySelectorAll(".query").forEach(function(filterEl) {
              filterEl.addEventListener("click", function(e){
                  searchResults.style.display = "none";
                  loading.style.display = "none";
                  e.preventDefault();
                  clickSearch(filterEl.getAttribute("data-params"));
                  return false;
              })
            });
        }

        const searchBtn = document.getElementById("searchBtn");    
        const searchTxt = document.getElementById("search");    
        const searchFrm = document.getElementById("searchFrm");    
        const searchResults = document.getElementById("searchResults");    
        const tableBody = searchResults.querySelectorAll("tbody")[0];
        const loading = document.getElementById("loader");

        searchTxt.focus();

        searchBtn.addEventListener("click", search);
        searchTxt.addEventListener("keypress", search);
        searchFrm.addEventListener("submit", function(e){e.preventDefault();},false);


    </script>

    </html>
    